language: python

addons:
  apt:
    packages:
      - texlive-latex-recommended
      - texlive-latex-extra
      - texlive-fonts-recommended

notifications:
  webhooks:
    urls:
      - https://webhooks.gitter.im/e/7d967d9679efbbc43466
    on_success: change  # options: [always|never|change] default: always
    on_failure: always  # options: [always|never|change] default: always
    on_start: false     # default: false

before_install:
  - mkdir -p $HOME/texlive && curl -L https://github.com/urdh/texlive-blob/releases/download/20160619/texlive.tar.xz | tar -JxC $HOME/texlive

install:
# Sphinx requirements
  - pip install -r requirements.txt
# Latex requirements
  - PATH=$HOME/texlive/bin/x86_64-linux:$PATH
  - tlmgr update --self
  - tlmgr install combelow
  - tlmgr install babel-french
  - tlmgr install babel-german
  - tlmgr install babel-romanian
  - tlmgr install babel-italian
  - tlmgr install babel-spanish

before_script:
  - ./scripts/ci/setup_git.sh
  - ./scripts/ci/transifex_push.sh

script:
  - ./scripts/build-docs.sh

after_success:
  - ./scripts/ci/deploy-docs.sh

env:
  global:
    # Transifex password
    - secure: "m0L20Fcw4zpuh2Z6wRbEzg346paBBg8gJiYdK/SR5y6MxhoG6mSDMa4vjmez6++pt2O0Xx1sQ2FQVE8GjnNl2EQWSAO3tgCIDc0SPFPB9hwfUfJky/8T2OV1Si6a0ldDfEK5rRWxuLiBG5ZynUh7qFz/zu8INh263dRFL/c6ny+byDHmPhg66OxEtIlNXirkMpqGLBFyClz0klsVp6T4ryVSSXENpcb4xIHLQG4xwuWEpEew7nQ/Z/iEAZ+SsqKKn8Y0BEf4fGEHp1WGgWS9J8p3Mfzto7sX80Qg1T4lFBIzZprRN9ERkA8WNhD96z2UnhgfCXpqoPnnSYH0vS0p5l7nxXzxvtRWnEsC/9QEJlTExlhs+KK538sdUQAdrUbJP+kt63aGshHNOTNuIrB1ctKMm5ztUgh3vlbm0uRFcOkj7urMtjbFlQPA2q3XISj6zbDOfHZa4ZbqUa6T0G/KpJU40QiSsbadBZpemr+FVzDHhSTH1IJr/XgjKDzG8L7rkX5mFY86t1kOvYuVq3UxACxrJOTlHr/BpCYIEZRuiREWcmb0xTTH4ZTSVJuOwaojuYtHCyMF2Wwa/yXFiDWbVlqCFUhtHrkrV9IPJTIbBSbg7D3nGMyi/N3hKXQJn3Oxx2m3pIFDloEKKe5YH+DRkJ/FbItY6h5RPp37bZZU8x8="
